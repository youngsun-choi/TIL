Java

## thread

프로세스와 스레드란?

* **프로세스** : 실행 중인 프로그램, 자원, 스레드로 구성된다.

* **스레드** : 프로세스 내에서 실제 작업을 수행하는 흐름이다.

* 모든 프로세스는 하나 이상의 스레드를 가진다.

* 프로세스 종류

  * single thread process : 자원+스레드(메인 스레드)
  * multi thread process : 자원+스레드(메인 스레드)+스레드+...+스레드

* 멀티프로세스 vs. 멀티스레드

  하나의 새로운 프로세스를 생성하는 것보다 하나의 새로운 스레드를 생성하는 것이 더 적은 비용이 든다.

* 멀티스레드의 장단점

  | 장점                               | 단점                                   |
  | :--------------------------------- | -------------------------------------- |
  | 자원을 효율적으로 사용가능하다.    | 동기화가 쉽지 않다.                    |
  | 사용자에 대한 응답성 향상된다.     | 교착상태가 발생할 수 있다.             |
  | 작업이 분리되어 코드가 간결해진다. | 스레드가 효율적으로 실행되게 해야한다. |

* 스레드 구현방법

  1. 몇 개의 스레드로 구현할지 결정한다.

  2. 각각의 스레드 기능을 결정한다.

  3. 스레드 기능의 갯수만큼 스레드 클래스를 만든다.

     * Thread클래스를 상속해서 스레드 클래스 생성

       ```
        class MyThread extends Thread{
       	public void run(){/*작업내용*/}
       }
       ```

     * Runnable인터페이스를 구현 스레드 클래스 생성(**실제 스레드를 상속받은 것이 아닌 스레드의 기능을 제공한다.**)

       ```
       class MyThread extends Thread{
       	public void run(){/*작업내용*/}
       }
       ```

* 스레드를 기동시키면 해당 자원을 준비하고 실행한다. 따라서 Call Stack은 스레드 수만큼 생성된다. 

* setDaemon()

  리눅스 - 데몬, 윈도우즈 - 서비스 : background에서 수행되는 프로그램이다.

  스레드 start() 전에 설정해야한다. 자식 스레드를 setDaemon()으로 설정하면 run method를 모두 수행해도 대기상태가 된다. 부모 스레드가 종료되면 자식 스레드도 같이 종료된다.

---

## 내부 클래스

클래스의 내부에 정의되는 클래스이다. 포함하는 외부 클래스의 import문을 같이 사용할 수 있다.  안드로이드 앱에서 주로 사용한다. 

* 내부 클래스 종류

  1. 멤버 클래스 : 메서드 밖에 있는 클래스이다.

   * 인스턴스 클래스

     객체 생성 시 멤버변수를 공유할 수 있다. 

  *  스태틱 클래스

     static 을 붙이면 클래스명으로 멤버변수를 사용할 수 있다.

  2. 로컬 클래스 : 메서드 안에 있는 클래스이다.

  * 로컬 클래스

  * 이름이 없는 로컬 클래스 : 객체가 필요한 곳에서 클래스 정의와 실행을 동시에 한다.

    | 내부 클래스의 종류   | 생성되는 클래스명의 규칙      |
    | -------------------- | ----------------------------- |
    | instance class       | 외부클래스$내부클래스.class   |
    | static class         | 외부클래스$내부클래스.class   |
    | 이름있는 로컬 클래스 | 외부클래스$N$내부클래스.class |
    | anonymous class      | 외부클래스$N.class            |

---

## Lambda

* Java 8 인터페이스 구문
  1. 익명 구현 객체 : 이름 없는 구현 클래스 선언과 동시에 객체 생성한다.
  2. 디폴트 메서드 사용 : 인터페이스만으로는 사용 불가하다. non-static메서드를 호출하여 사용하는 것과 같다.
  3. 정적 메서드 사용 : 인터페이스로 바로 호출 가능하다.
* Java 8버전부터 구현해야하는 객체식이 하나일 때만 사용가능하다.

* 람다식 : 메서드를 하나의 식으로 표현한 것이다.

| argumnet             | lambda syntax                   |
| -------------------- | ------------------------------- |
| No arguments         | () -> System.out.println("Hi"); |
| One arguments        | s -> System.out.println(s);     |
| Two arguments        | (x,y) -> x+y;                   |
| With arguments types | (Integer x, Integer y) -> x+y;  |

* 타겟 타입

  람다식이 대입되는 인터페이스이다.

* 함수적 인터페이스

  하나의 추상 메서드만 선언된 인터페이스가 타겟 타입이다.
  * @FunctionalInterface 어노테이션

    하나의 추상 메서드만을 가지는지 컴파일러가 체크한다. 두 개 이상의 추상 메서드가 선언되어 있으면 컴파일 오류가 발생한다.

